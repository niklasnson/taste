#include "inbox.h"
#include <iostream>
#include <stdexcept>

template <typename T>
Inbox<T>::Inbox() {}

template <typename T>
void
Inbox<T>::enroll(T & client) {
  routing_table.emplace(client.get_name(), &client);   
}

template <typename T>
void
Inbox<T>::recv(Message & msg) {
  try {
  routing_table.at(msg.to) -> recv(msg); 
  } catch (const std::out_of_range & oor) {
    std::cerr << oor.what() << ": Out of range. Key: '" << msg.to << "'." << std::endl; 
  }
}
